(function(e){function t(t){for(var s,o,a=t[0],l=t[1],c=t[2],f=0,d=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],s=!0,a=1;a<r.length;a++){var l=r[a];0!==n[l]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var s={},n={app:0},i=[];function o(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=s,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/goat-viewer/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;i.push([1,"chunk-vendors"]),r()})({0:function(e,t){},"01dd":function(e,t,r){e.exports=r.p+"fonts/NotoSansDisplay-SemiCondensedLightItalic.b541af1f.ttf"},1:function(e,t,r){e.exports=r("56d7")},2891:function(e,t,r){e.exports=r.p+"fonts/Roboto-LightItalic.d1efcd4d.ttf"},"487c":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);var s=r("2b0e"),n=function(){var e=this,t=e._self._c;return t("q-layout",{attrs:{view:"hHh lpr fff","data-nosnippet":""}},[t("q-header",[t("q-toolbar",[t("q-toolbar-title",{attrs:{shrink:!0}},[e._v("goat viewer")]),t("q-btn",{staticClass:"q-ml-lg",attrs:{icon:"help",label:"About"},on:{click:function(t){e.aboutDialog=!0}}}),t("q-space"),t("q-btn",{staticClass:"q-mx-sm github",attrs:{icon:"fab fa-github",color:"primary",label:"git load locally","no-caps":"",type:"a",href:"./components/gitadd.sh"}}),t("q-btn",{staticClass:"q-mx-sm github",attrs:{icon:"fab fa-github",color:"primary",label:"git load repo","no-caps":"",type:"a",href:"./components/gitpush.sh"}})],1)],1),t("q-page-container",[t("ViewerPage",{attrs:{dxfUrl:e.dxfUrl}},[null===e.inputFile?t("div",{staticClass:"centralUploader row justify-center items-center"},[t("div",{staticClass:"col-auto",staticStyle:{width:"300px"}},[t("q-file",{staticClass:"col",attrs:{filled:"","bottom-slots":"",clearable:"",value:e.inputFile,label:"Select file or drag here",accept:".dxf"},on:{input:e._OnFileSelected,clear:e._OnFileCleared},scopedSlots:e._u([{key:"before",fn:function(){return[t("q-icon",{attrs:{name:"folder_open",size:"xl"}})]},proxy:!0},{key:"hint",fn:function(){return[t("span",[e._v("File is processed locally in your browser")])]},proxy:!0}],null,!1,935147319)})],1)]):e._e()])],1),t("q-dialog",{model:{value:e.aboutDialog,callback:function(t){e.aboutDialog=t},expression:"aboutDialog"}},[t("q-card",[t("q-card-section",{staticClass:"row items-center q-pb-sm"},[t("div",{staticClass:"text-h6"},[e._v("About")]),t("q-space"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),t("q-separator"),t("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"},domProps:{innerHTML:e._s(e.aboutHtml)}})],1)],1)],1)},i=[],o=function(){var e=this,t=e._self._c;return t("q-page",{staticClass:"row items-stretch root"},[t("div",{staticClass:"col relative-position"},[e._t("default"),t("DxfViewer",{ref:"viewer",attrs:{dxfUrl:e.dxfUrl,fonts:e.fonts},on:{"dxf-loaded":e._OnLoaded,"dxf-cleared":e._OnCleared,"dxf-message":e._OnMessage}})],2)])},a=[],l=function(){var e=this,t=e._self._c;return t("div",{ref:"canvasContainer",staticClass:"canvasContainer"},[t("q-inner-loading",{staticStyle:{"z-index":"10"},attrs:{showing:e.isLoading,color:"primary"}}),null!==e.progress?t("div",{staticClass:"progress"},[t("q-linear-progress",{attrs:{color:"primary",indeterminate:e.progress<0,value:e.progress}}),null!==e.progressText?t("div",{staticClass:"progressText"},[e._v(" "+e._s(e.progressText)+" ")]):e._e()],1):e._e(),null!==e.error?t("div",{staticClass:"error",attrs:{title:e.error}},[t("q-icon",{staticClass:"text-red",staticStyle:{"font-size":"4rem"},attrs:{name:"warning"}}),e._v(" Error occurred: "+e._s(e.error)+" ")],1):e._e()],1)},c=[],u=r("c686"),f=r("5a89");function d(){return new Worker(r.p+"js/DxfViewerWorker.02f29f6b.worker.js")}var p={name:"DxfViewer",props:{dxfUrl:{default:null},fonts:{default:null},options:{default(){return{clearColor:new f["d"]("#fff"),autoResize:!0,colorCorrection:!0,sceneOptions:{wireframeMesh:!0}}}}},data(){return{isLoading:!1,progress:null,progressText:null,curProgressPhase:null,error:null}},watch:{async dxfUrl(e){null!==e?await this.Load(e):(this.dxfViewer.Clear(),this.error=null,this.isLoading=!1,this.progress=null)}},methods:{async Load(e){this.isLoading=!0,this.error=null;try{await this.dxfViewer.Load({url:e,fonts:this.fonts,progressCbk:this._OnProgress.bind(this),workerFactory:d})}catch(t){console.warn(t),this.error=t.toString()}finally{this.isLoading=!1,this.progressText=null,this.progress=null,this.curProgressPhase=null}},GetViewer(){return this.dxfViewer},_OnProgress(e,t,r){if(e!==this.curProgressPhase){switch(e){case"font":this.progressText="Fetching fonts...";break;case"fetch":this.progressText="Fetching file...";break;case"parse":this.progressText="Parsing file...";break;case"prepare":this.progressText="Preparing rendering data...";break}this.curProgressPhase=e}this.progress=null===r?-1:t/r}},mounted(){this.dxfViewer=new u["a"](this.$refs.canvasContainer,this.options);const e=e=>{this.dxfViewer.Subscribe(e,t=>this.$emit("dxf-"+e,t))};for(const t of["loaded","cleared","destroyed","resized","pointerdown","pointerup","viewChanged","message"])e(t)},destroyed(){this.dxfViewer.Destroy(),this.dxfViewer=null}},h=p,g=(r("6305"),r("2877")),b=Object(g["a"])(h,l,c,!1,null,"12d1c0cb",null),x=b.exports,m=r("2891"),y=r.n(m),v=r("01dd"),w=r.n(v),_=r("af29"),C=r.n(_),L=r("ee2f"),O=r.n(L),U={name:"ViewerPage",components:{DxfViewer:x},props:{dxfUrl:{type:String}},data(){return{layers:null}},methods:{_OnLoaded(){const e=this.$refs.viewer.GetViewer().GetLayers();e.forEach(e=>s["a"].set(e,"isVisible",!0)),this.layers=e},_OnCleared(){this.layers=null},_OnMessage(e){let t="info";switch(e.detail.level){case u["a"].MessageLevel.WARN:t="warning";break;case u["a"].MessageLevel.ERROR:t="negative";break}this.$q.notify({type:t,message:e.detail.message})}},created(){this.fonts=[y.a,w.a,C.a,O.a]}},q=U,P=(r("a08b"),Object(g["a"])(q,o,a,!1,null,"f5aeb5c4",null)),F=P.exports,Q={components:{ViewerPage:F},data(){return{dxfUrl:null,inputFile:null,isLocalFile:!1,aboutDialog:!1,urlDialog:!1,inputUrl:null}},methods:{_OnFileSelected(e){e?(this.dxfUrl&&this.isLocalFile&&URL.revokeObjectURL(this.dxfUrl),this.isLocalFile=!0,this.inputFile=e,this.dxfUrl=URL.createObjectURL(e)):this._OnFileCleared()},_OnFileCleared(){this.inputFile&&(this.inputFile=null,URL.revokeObjectURL(this.dxfUrl),this.dxfUrl=null,this.$q.notify({type:"info",message:"File cleared"}))},_OnUrl(){if(null===this.inputUrl)return;const e=this.inputUrl.trim();""!==e&&(this.dxfUrl&&this.isLocalFile&&URL.revokeObjectURL(this.dxfUrl),this.isLocalFile=!1,this.inputFile=new File(["remote_file"],e,{type:"text/plain"}),this.dxfUrl="https://api.allorigins.win/raw?url="+encodeURIComponent(e))}},created(){const e=document.getElementById("about");this.aboutHtml=e.innerHTML,e.style.display="none",document.getElementById("noscript").innerText=e.innerText},destroyed(){this.dxfUrl&&URL.revokeObjectURL(this.dxfUrl)}},k=Q,S=(r("ee96"),Object(g["a"])(k,n,i,!1,null,"5f5522d3",null)),j=S.exports,R=(r("487c"),r("0ca9"),r("e54f"),r("573e"),r("fe09")),T=[R["C"],{components:{QBtn:R["c"],QCard:R["d"],QCardSection:R["e"],QCheckbox:R["f"],QDialog:R["g"],QFile:R["h"],QFooter:R["i"],QForm:R["j"],QHeader:R["k"],QIcon:R["l"],QInnerLoading:R["m"],QInput:R["n"],QItem:R["o"],QItemLabel:R["p"],QItemSection:R["q"],QLayout:R["r"],QLinearProgress:R["s"],QList:R["t"],QPage:R["u"],QPageContainer:R["v"],QScrollArea:R["w"],QSeparator:R["x"],QSpace:R["y"],QSpinner:R["z"],QToolbar:R["A"],QToolbarTitle:R["B"]},plugins:{Notify:R["b"],ClosePopup:R["a"]}}];s["a"].use(...T),new s["a"]({el:"#app",render:e=>e(j)})},6305:function(e,t,r){"use strict";r("beb5")},"6d35":function(e,t,r){},a08b:function(e,t,r){"use strict";r("e823")},af29:function(e,t,r){e.exports=r.p+"fonts/HanaMinA.b48893dc.ttf"},beb5:function(e,t,r){},e823:function(e,t,r){},ee2f:function(e,t,r){e.exports=r.p+"fonts/NanumGothic-Regular.3cbe9257.ttf"},ee96:function(e,t,r){"use strict";r("6d35")}});
//# sourceMappingURL=app.ff5709ea.js.map